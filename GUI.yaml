# ---------------------------------------------------
# Mihomo (Clash Meta) Clash Verge Rev è¦†å†™é…ç½®
# ---------------------------------------------------

# --- åŸºç¡€è®¾ç½® ---
unified-delay: true
geodata-mode: false
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 24
tcp-concurrent: true
find-process-mode: strict

allow-lan: true
mode: rule
log-level: info
ipv6: true
udp: true

external-controller: 0.0.0.0:9090

geox-url:
  mmdb: 'https://geodata.kelee.one/Country-Masaiki.mmdb'
  asn: 'https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb'

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - +.v2ex.com
  skip-domain:
    - Mijia Cloud

tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true

dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - "*"
    - +.lan
  default-nameserver:
    - 223.5.5.5
    - 223.6.6.6
  nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query

# ==========================================
# ğŸ¯ ç­–ç•¥ç»„
# ==========================================
proxy-groups:
  # --- è‡ªåŠ¨é€‰æ‹©ï¼ˆä¾›å…¨çƒé€‰æ‹©å¼•ç”¨ï¼‰ ---
  - name: âš¡ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    interval: 300
    tolerance: 50
    lazy: true
    url: 'http://www.google.com/blank.html'
    timeout: 2000
    max-failed-times: 3
    hidden: true
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'

  - name: ğŸŒ å…¨çƒé€‰æ‹©
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - âš¡ è‡ªåŠ¨é€‰æ‹©

  - name: ğŸ¤– AI
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'

  - name: ğŸµ TikTok
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'

  - name: ğŸ“¶ Speedtest
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - DIRECT

  - name: ğŸ¬ Netflix
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'

  - name: ğŸªŸ Microsoft
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - DIRECT
      - ğŸŸ å…œåº•åå¤‡

  - name: ğŸ” Google
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - ğŸŸ å…œåº•åå¤‡

  - name: âœˆï¸ Telegram
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - ğŸŸ å…œåº•åå¤‡

  - name: ğŸŸ å…œåº•åå¤‡
    type: select
    include-all: true
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
    proxies:
      - ğŸŒ å…¨çƒé€‰æ‹©

# ==========================================
# ğŸ“ è§„åˆ™é›†
# ==========================================
rule-providers:
  LAN:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Lan.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/LAN_SPLITTER.yaml'

  Direct:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Direct.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/Direct.yaml'

  Proxy:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Proxy.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/Proxy.yaml'

  ChinaDownloadCDN:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/ChinaDownloadCDN.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/ChinaDownloadCDN.yaml'

  InternationalDownloadCDN:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/InternationalDownloadCDN.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/InternationalDownloadCDN.yaml'

  AI:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/AI.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/AI.yaml'

  TikTok:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/TikTok.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/TikTok.yaml'

  SpeedtestIntl:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/SpeedtestInternational.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/SpeedtestInternational.yaml'

  Game:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Game.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/Game.yaml'

  1Password:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/1PasswordUS.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/1PasswordUS.yaml'

  Steam:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Steam.yaml'
    url: 'https://rule.kelee.one/Clash/Steam.yaml'

  Netflix:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Netflix.yaml'
    url: 'https://rule.kelee.one/Clash/Netflix.yaml'

  Emby:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Emby.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/EmbyServer.yaml'

  iCloudChina:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/iCloudChina.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/iCloudChina.yaml'

  ApplePushNotificationService:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/ApplePushNotificationService.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/ApplePushNotificationService.yaml'

  AppleSoftwareUpdates:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/AppleSoftwareUpdates.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/AppleSoftwareUpdates.yaml'

  AppleID:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/AppleID.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/AppleAccount.yaml'

  AppStore:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/AppStore.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/AppStore.yaml'

  TestFlight:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/TestFlight.yaml'
    url: 'https://rule.kelee.one/Clash/TestFlight.yaml'

  Microsoft:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Microsoft.yaml'
    url: 'https://rule.kelee.one/Clash/Microsoft.yaml'

  Google:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Google.yaml'
    url: 'https://rule.kelee.one/Clash/Google.yaml'

  Telegram:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/Telegram.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/Telegram.yaml'

  ESET_China:
    type: http
    behavior: classical
    interval: 86400
    format: yaml
    proxy: DIRECT
    path: './rules/ESET_China.yaml'
    url: 'https://kelee.one/Tool/Clash/Rule/ESET_China.yaml'

# ==========================================
# ğŸš¦ è§„åˆ™
# ==========================================
rules:
  - RULE-SET,LAN,DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Proxy,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,ChinaDownloadCDN,DIRECT
  - RULE-SET,InternationalDownloadCDN,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,AI,ğŸ¤– AI
  - RULE-SET,TikTok,ğŸµ TikTok
  - RULE-SET,SpeedtestIntl,ğŸ“¶ Speedtest
  - RULE-SET,Steam,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,Game,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,Netflix,ğŸ¬ Netflix
  - RULE-SET,Emby,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,TestFlight,ğŸŸ å…œåº•åå¤‡
  - RULE-SET,iCloudChina,DIRECT
  - RULE-SET,ApplePushNotificationService,DIRECT
  - RULE-SET,AppleSoftwareUpdates,DIRECT
  - RULE-SET,AppleID,DIRECT
  - RULE-SET,AppStore,DIRECT
  - RULE-SET,1Password,DIRECT
  - RULE-SET,Microsoft,ğŸªŸ Microsoft
  - RULE-SET,Google,ğŸ” Google
  - RULE-SET,Telegram,âœˆï¸ Telegram
  - RULE-SET,ESET_China,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŸ å…œåº•åå¤‡
